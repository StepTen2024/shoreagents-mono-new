# Electron Builder Configuration
# Builds Windows installer for Shore Agents Desktop App

appId: com.shoreagents.desktop
productName: ShoreAgentsAI
copyright: Copyright Â© 2025 Shore Agents

# Auto-update configuration (GitHub Releases)
publish:
  provider: github
  owner: StepTen2024
  repo: shoreagents-mono-new
  releaseType: release

# Build output directory
directories:
  buildResources: build
  output: dist

# Files to include in build
# Only include Electron files and essential node_modules
# Since app loads from Railway, we don't need Next.js dependencies
files:
  - "electron/**/*"
  - "package.json"
  - "build/**/*"
  # Only include Electron-specific dependencies
  - "node_modules/electron-updater/**/*"
  - "node_modules/electron-log/**/*"
  - "node_modules/uiohook-napi/**/*"
  - "node_modules/@paulcbetts/**/*"
  - "node_modules/active-win/**/*"
  - "node_modules/clipboardy/**/*"
  # Include required runtime dependencies
  - "node_modules/builder-util-runtime/**/*"
  - "!node_modules/.cache"

# Exclude files (reduce bundle size)
# Don't include Next.js files - Electron connects to Railway
# Staff don't need the web server files
asarUnpack:
  - "node_modules/uiohook-napi/**/*"
  - "node_modules/@paulcbetts/**/*"
  - "node_modules/active-win/**/*"

# Windows-specific configuration
win:
  target:
    - target: nsis
      arch:
        - x64
  icon: build/shoreagents-icon.png
  artifactName: "ShoreAgentsAI-Setup-${version}.${ext}"
  
# Compression settings (reduce file size significantly)
compression: maximum

# Windows installer configuration (NSIS)
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: "ShoreAgentsAI"
  # installerIcon and uninstallerIcon will be auto-generated from the main icon
  # license: LICENSE  # Commented out if LICENSE file doesn't exist
  artifactName: "ShoreAgentsAI-Setup-${version}.${ext}"
  deleteAppDataOnUninstall: false
  # Differential updates for faster incremental updates
  differentialPackage: true

# Environment variables to embed in build
# Set these when building for production
extraMetadata:
  name: shore-agents-desktop
  version: 1.0.0

# Build resources (icons, etc.)
# Place icon.ico in /build folder


